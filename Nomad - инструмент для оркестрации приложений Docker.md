**Здесь переводится видео в статью Александра Сигачева из Inventos "Nomad - инструмент для оркестрации приложений Docker"**

Ссылка на видеодоклад https://www.youtube.com/watch?v=M_ImANMAE_8

**Текст сделан из субтитров. Буду очень благодарен в форматировании текста, его вычитки. Для этого достаточно знать русский язык.
Присылайте свои pull request или присылайте текст на почту patsev.anton[собака]gmail.com**

1 раз я всех приветствую на нашем очередном этапе [музыка] представлюсь для тех кто меня не знаете есть такие мелочи александров я работаю тимлида вам компании mentos сегодня вам расскажу про нам от а может на метр ну вы и так какие задачи мы ставим для этого доклада это запустить других предложения которыми summer создать на протяжении этого года однако от доклада докладов обеспечить отказоустойчивость наше положение и познакомиться с функционалом данную инструменту что нам понадобится для того чтобы это сделать нам понадобится минимум три ноты на которых мы будем запускать для данного примера я использовал в поиске моего любимого хостинга переходит по рефила радости покупаем я буду всем плода и у нас уже должен быть установлен контур который мы ставили на прошлом докладе с вами мы должны будем сами поставить на мат и соответственно приложение которые непосредственно будем с вами запускать что перечислил у нас есть предложение мы умеем с вами уже вести разработку при помощи докеры использую только там под я связывание нашего контейнера мы можем поднимать наше приложение как на диалог у машины так и продаж и на одном сервере при помощи таких там поздно хоть это не продакшна виде решения также умеет настраивать консул до трех серверов и так давайте мы с вами разберем что такое нам от наматывать инструмент для управления кластером и запаха задач на машину ключевые возможности которые предоставляет инноватор непосредственно поддержка докер нам интерес и потому что предложение для запуска используя номад написано бог как и многие продукты от верха же кора и поэтому представляет свете 1 бинарник из бинардик может работать как от железа так и в режиме клиента он имеет достаточно широкий набор вам можете назад что задач кроме докер а также поддерживаются java приложение можно пустить можно в контейнер и есть возможность запуск виртуализации ниже качество об этом будет и так обрабатывать нам от уже в его архитектуру закладывалась масштабирования уже по дизайну с чем можно сравнить нам отит то есть первые конкурентов это tockers вам супер сама это непосредственно получается утилита предоставляемое нативно вместе с докеров какие из ключевых отличий если вы креслом за точно только для запуска долго предложений то она позволяет запускать не только только контейнера новые ли грязью варианты также может сторонитесь кубер месяца в отличие от увернется который собой покрывает практически все задачи на мат планирует для того чтобы приложение работало для обеспечения работы я регистрации приложения он не берет на себя дополнительные функции такие как например организация сети и организации маршрутизации точки входа можно сравнить с есть этим это инструмент мадонна но его недостаток в том что получается в ендер ног и если мы поднимем свой узкий тур нам будет достаточно тяжело мигрировать уже становится рассмотрим с вами простейший простейший конфликт нармада которая используется в данном для данного доклада так как мы использовали в поиске у нас них были доступны только внешние а печники которые доступны в этом случае мы описываем таки интерфейс на каком айтишники будут доступны то есть несколько таковых такой протокол используется для того чтобы управлять передавать данные переписи для вызова удаленных вызывал и шеф жертв как протокол это протокол которому надо нам admir с тобой задействует и соответственно и помощьник запускается мнение с информацией и происходит планирование ресурсов и запуску конкретную задачу дальше мы описываем секцию сервера мы говорим что сервер для данной модели джон что минимальное количество для бензин спасти ра нам требуется три ноты и говорим про этим адресам искать соответственно своих соседей ниже мы апельсина что данный же не забирал будет работать с режиме клиента и говорим где искать послуг которого хранится вся информация консул для тех кто не знает это получается сервис discovery который предоставляет даже компанией g-код поэтому у нее лично что два продукта тесно связаны между собой данном случае это конфет из документации это минимально конфиг который позволяет запустить нам нужно из цифровой части на своей develop отношения в размере или 1 копию мы видим что один экземпляр допускается по умолчанию данный сервис имеет web-интерфейс который позволяет смотреть статус допущенных задач то есть мы видим этом слайде 3 задачи запущены этот экземпляр из документации рыб сервис который процессе доклады я завел и и баланса которая отвечает у нас за счет придет трафика и дальнейшем хочешь взять его на предложение секция клиент показывает какие ноду нас существуют в нашем кластере здесь мы видим что в процессе тестов надо было занимая пишет о начале ударе на нем момент был зачищен перезапущен поэтому зале звезд два раза но после перезапуска вал получают получил новый абишек и поэтому видим как бы дублирование но да это запись пропадет буквально по моему через сутки по умолчанию есть и настраивать другие значения так в данном случае мы видим уже непосредственно информацию по конкретной ноги какие на ней задача запущены то есть на эту ноту попала две задачи статусы и дополнительную информацию при работе с на мадам надо иметь ввиду что имеется три варианта планерной задач первый вариант это сервис и это тоже общее приложение процессы подряд категория обычно проходит обычные предложения например ряженных или муёской которые запускаются пластыри и работают баг это пакет не задачи как пример можно рассмотреть допустим выгрузку данных из базы и конвертацию или же это на составление отчетов и систем это магазин задача которой допускаются на каждой ноги можно использовать например как точно ухода как вы знаем что найденная печник один порт возможно запустить только один процесс используя данный тип задач можем обеспечить накажи ноги будет присутствует допустим и джинны слушают 10 порт и дальше расширять множество приложений по нашему кластера что собой представляет описание задач непосредственно получается джова который может содержать одну и более друг и в каждой группе может быть описана 1 и более задача задача описаны в одной руки будут выполняться на одной машине рядом как вариант можно использовать для этого например у нас есть вообще за которую кеннету блоги и тут же есть задачи которые обрабатывают логии ждет статистику пологом какой центральное хранилище это придем конфиг описание запуска нашей задачи то есть мы описываем jog dog говорим что используется регион с это центр который будет это выполнено тип задач и сервис стратегия по эту информацию параллельно можно обновлять 2 задержкой 30 секунд дальше у нас идет описание группы говорю что в группу ходит по пять копий задачей frontend описывать конфликт так как здесь драйвер докер то указывается образ данном случает публичный образ docker hub как суворовский пример указывается сервис который слушает кто-то попал описывать их проверки что же устроенный говоришь о дтп адрес который мы проверяем интервал и тайм-аут который мы слушаем так же как мы знаем при работе с отелем и удобный хочу передать конфигурацию примерном окружению данном случае передается эти перемены окружении информация о подключения базе данных и блок отвечающие за ресурсы которые выделяет процесса память сеть идет описание портов данном случае мы видим что дтп под не указан это значит что будет повешен под которой динамические выделиться есть на этой ноте запустится 2 3 4 контейнера то просто динамических сможете сделать на разные порты а примере ps пор статический машина будет пусть уже 443 под примера которая поддерживает нас есть докер который нам интересен котором работали отдельные ford процессов работает java c виртуализации теме rtk впрочем он свои используют дописывать добавлять шляпки помощь плане ну а пик взаимодействовать нам этом можно из командной строки то это отключаем и через named передаем информацию которую мы хотим запросить варим что ходить матрица ту же вы либо же как мисс консулом можно использовать rest api данном случае до 5 пример для просмотра списка джо был и результат вас получится рисунка с информацией по этим по запущенным нашим заданием чего нет из коробки и в номады в отличие от 0 месяцев которым по документации есть информация об том как сервисы обвиняются в какие-то сети мы прописываем там допустим сервисы прописываю точки входа ведь энвиса named этого ничего не предоставлять с коробки и всю эту архитектуру будет самостоятельно прорабатывать и применять те или иные решения теперь мы с вами prm.ru сектору и сделаем простую задачу очень сложно поддержки в разработке в дальнейшем сопровождения все как мы любим в один из воскресных вечеров когда я перестал интересная статья нашёл статью как может создать онлайн радио на нашем любимом фромборке ruby on rails для этого границу говорилось на нём дело спрос праздника панель который сможет был закройте mp3 файлы они становились в очередь дальше ли прикручиваться и background jobo которая бы ground я сформировал плейлист там можно было рандомный ли там следовательно использоваться дальше game который обеспечивал загрузку файла использовался сервис непосредственно вещания для хранения в данной статье было предложено использовать s3 для хранения загрузки файлов мыска или стране как раз наш плейлист и а радист взаимодействия у меня не месть нашим темам обеспечим фоновой задачи для выполнения граммов job как это выглядит у простого разработчикам который не спала на блоками и прочими то есть мы берем одну машину лобо пост устанавливаю берет с устанавливаю squad останавливаемся и люс вещания редис поэтому система запускаем 30 минут нас на выходе видеотека дорожного базе и поток идет теперь что мы делаем дальше мы решили абстрагироваться в одной физической машина и говорим что вы хост не существует так как у нас схема разработана то принципе и нашли менять то что у нас и читают файловой системы но появляется из 3 как хранилище статический файл как мы построим современную определенную систему для того чтобы обеспечить ту же самую задачу на прежде понравился сервис дисковой которым все будет ориентироваться координироваться и хранится это будет к-поп консул подпишешься по очереди машины в данном случае это три минимальный classic который были менять газа устойчив который позволит для функционал на том за кого будет запущен в админке на каком других будет опущен мышкой возможен попадет на то же то есть это будет определяться менеджер ресурсов дальше где-то будет запущена фоновая задача которой будем одессе с редисом это фоновой задачи будет слать наш поток войска и сказать даже непосредственно пользователем данные будут странице соответственно с быками руб 1 из 3 дальше программу задач быстрее забирать и стриме их в с pajkatt войска стоит если у нас по какой-то причине выходит одна из носа что происходит на мид определяет что у него запланированное стоп это задача доступных он по чекам видеть только четыре задачи соответственно в их переопределить надо на схему видим что там программ долго попала на день намертво aren't попала на метр они и дальше наш сервис получались продолжать работать как-то руси схему для пользы пользу приходит балансиров балансе посада и торнадо но посылает на одного из машинки непосредственно жениться задача заполняющий запрос который спросил пользователь что собой может представлять был балансер о балансе это может быть либо отдельные желез колебательные сервер которые непосредственно через сервис discovery я и куда ему обратиться либо мы можем его переместить вот наш кластер каждую машину и готова служить допустим 80 порт по своим обидчикам а теперь вопрос если [музыка] вождения suggesting вернись к сравнению с кубинцем порог вхождения достаточно низкий если брать по моему опыту то примерно день-два провоза документации позволяет запустить какое простое приложение пощупать посмотреть дальше уже зависит того как какие сложности мы хотим сами организовать и и сколько времени мы убьем на то что будет допустим раздевать 7 имеют машинами или же точку входа здесь нам нужно запустить просто индекс то этого там сильно коммутации два часа если мы хотим построить отказоустойчивый кластер котором хранится мышку или которому должна на резервироваться устанавливать бэкапы и и там синхронизируется то соответственно здесь уже затем другого уже есть какая-то может смотреть физических машины доминго есть может попросить никиту потыкать 4640 6 пор да вот все что это активно такой масштабной побольше сделать можно на сервис на попробуй смотришь там есть слева сервис так это вас но там можно нашить затем но пойдем в клиентах ну то есть вот получается мы видим что она ноги 3 и курица без задач сейчас собственно понимаю что они тоже как и даже не себя сзади скоблить выбрать лидера каким образом происходит из к власти это все происходит на базе комфорт то есть городу стоит капсулу которому не обращаются уже вальтер это такого все выбирают у них лидеры предоставляя друг другу но получается что самой себе но мы тоже является с местом доставления уже положение внутреннего разве не он средством регистрации и но получается как раз средства discovery новых регистраций они работали в паре то есть без том слоном от не будет работать а все понятно он использует con su ну то есть от логичным в рамках 1 компаний которые выпускают продукты и что характерно хорошо сними и взаимодействуют этого нет такой фермент который используется для хранения секретов грибы штамм сертификатов этим тоже ребят настраивать свою схему конечно я так и все смотрели тада я изучал техники стороны его в месяц то первое что торс сказать кубе лесных извини но меньше чем на бой давать запускаться не буду здесь до минимальных одна игра да то есть он там что-то делает как это бочки народа конечно здесь не было как ответ на предыдущий вопрос но на минимальной конфигурации и у ps который сейчас будет проблем с запуском у меня не испытал то есть нет такого что мое приложение там в 10 раз меньше потреблять ресурсы в чем эти листочки страции желчь и изъявления скажем так пожилые полностью большого на кликах или все-таки кук убирается осталось просто кстати сложилось что когда я изучал в мест мне было задач непосредственно предмет с обратиться к железным функция машины там точно вас интересовало кодирование на gpu и из коробки на тот момент я не нашел платили за простого способа глубине стоит запустить когда он там группы валя потратили 100 дней и решил посмотреть что вообще есть и в других вариантах и так вот затем 2 получилась сословий меня сайте познакомиться с фанатами и он позволяет дабы валетом буквально для строчка конфиге говорится что надо дать привилегии docker и противников драйвера рублей а сюжет решается через плагина и там получается надо записи 1-ом описывать как будет работать выделения ресурсов в идей там тучи навигации все сам путь это делаешь используют те же инструменты там фильм который отправите данной власти при власти демонстрирует банк живет счастливо то есть фактически позволяет тебе раз катить приложение а все эти дополнительные плюшки которые есть да все эти решения решаются споку средства которые попытаем тебе в принципе ребята в регуляции что мы выбрали одну функцию регистрация который которым должен помнить хорошо и правительством достаточно интересны являются да если вы не будет готовые конфиги можно просто взять готовую дырку я планировала тела но к сожалению успел то есть если время позволит тута ближайшую неделю может быть двери все-таки за большие выходные сделал какой-то дым которая при помощи ленты было позволь повторить эксперимент выглядеть ну и пощупать сейчас это просто вручную на момент и изучение инструмента я не вижу смысла сразу суть его цикл потому что не понимаешь тут ослабив тот инструмент talent q спасибо саша потом выложить видео на youtube люди просто я
